<!DOCTYPE html>
<html lang="en">
<head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bible Reading Planner - Besorah Yeshua</title>
    <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/planner.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <a href="/index.html">üìñ Besorah Yeshua</a>
            </div>
            <div class="nav-actions">
                <button id="startPlanBtn" class="btn btn-primary btn-sm">Start Plan Today</button>
                <button id="resetBtn" class="btn btn-secondary btn-sm">Reset Progress</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="planner-container">
        <div class="container">
            <!-- Header -->
            <div class="planner-header">
                <h1>Free Bible Reading Planner</h1>
                <div class="calendar-toggle">
                    <button id="gregorianBtn" class="calendar-btn active">Gregorian</button>
                    <button id="ethiopianBtn" class="calendar-btn">Ethiopian</button>
                </div>
            </div>

            <!-- Stats Dashboard -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üìö</div>
                    <div class="stat-content">
                        <div class="stat-value" id="totalReading">0</div>
                        <div class="stat-label">Total Days</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-content">
                        <div class="stat-value" id="completedReading">0</div>
                        <div class="stat-label">Completed</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìä</div>
                    <div class="stat-content">
                        <div class="stat-value" id="progressPercent">0%</div>
                        <div class="stat-label">Progress</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üî•</div>
                    <div class="stat-content">
                        <div class="stat-value" id="streakDays">0</div>
                        <div class="stat-label">Day Streak</div>
                    </div>
                </div>
            </div>

            <!-- Reading Plan Selector -->
            <div class="plan-selector">
                <label for="readingPlan">Select Free Reading Plan:</label>
                <select id="readingPlan" class="form-select">
                    <option value="nt90">90-Day New Testament</option>
                    <option value="ot365">OT365 Challenge (1-Year OT)</option>
                    <option value="ethiopian">Ethiopian Calendar Plan</option>
                </select>
                <p class="plan-description" id="planDescription">Read through the New Testament in 90 days</p>
                <div class="plan-stats" id="planStats">
                    <span>üìñ <span id="planChapters">260</span> total chapters</span>
                    <span>‚è±Ô∏è <span id="planTime">15-25 min/day</span></span>
                    <span>üìÖ <span id="planDays">90</span> days</span>
                </div>
            </div>

            <!-- Calendar View -->
            <div class="calendar-section">
                <div class="calendar-header">
                    <button id="prevMonth" class="nav-btn">‚Äπ</button>
                    <h2 id="currentMonth">Loading...</h2>
                    <button id="nextMonth" class="nav-btn">‚Ä∫</button>
                </div>
                <div id="calendar" class="calendar-grid">
                    <!-- Calendar will be generated by JavaScript -->
                </div>
            </div>

            <!-- Today's Reading -->
            <div class="reading-section">
                <div class="reading-header">
                    <h2>Today's Reading</h2>
                    <div class="day-info">
                        <span id="currentDay">Day 1</span>
                        <span id="currentTheme" class="theme-badge">Birth & Early Ministry</span>
                    </div>
                </div>
                <div id="todayReading" class="reading-card">
                    <p class="reading-placeholder">Select a date to view reading plan</p>
                </div>
                
                <div class="reading-actions">
                    <label class="reading-checkbox">
                        <input type="checkbox" id="markComplete">
                        <span>Mark today's reading as completed</span>
                    </label>
                </div>
            </div>

            <!-- Study Notes -->
            <div class="notes-section">
                <h3>Study Notes & Reflection</h3>
                <div class="reflection-prompts">
                    <p class="prompt-title">Reflection Questions:</p>
                    <ul class="prompts-list">
                        <li>What does this passage reveal about God's character?</li>
                        <li>What command should I obey or truth should I believe?</li>
                        <li>How does this apply to my life today?</li>
                        <li>What sin should I confess and forsake?</li>
                        <li>Who should I share this truth with?</li>
                    </ul>
                </div>
                <textarea id="studyNotes" class="study-textarea" placeholder="Write your reflections, insights, and prayers here..."></textarea>
                <button id="saveNotes" class="btn btn-primary">Save Notes</button>
            </div>

            <!-- Quick Actions -->
            <div class="actions-section">
                <h3>Quick Actions</h3>
                <div class="actions-grid">
                    <button id="jumpToday" class="action-btn">
                        <span class="action-icon">‚Ü™Ô∏è</span>
                        <span>Jump to Today</span>
                    </button>
                    <button id="viewPlan" class="action-btn">
                        <span class="action-icon">üìã</span>
                        <span>View Full Plan</span>
                    </button>
                    <button id="helpBtn" class="action-btn">
                        <span class="action-icon">‚ùì</span>
                        <span>Get Help</span>
                    </button>
                    <a href="/index.html" class="action-btn">
                        <span class="action-icon">üè†</span>
                        <span>Back to Home</span>
                    </a>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Besorah Yeshua. A completely free tool. Your progress is saved locally in your browser.</p>
            <div class="footer-links">
                <a href="/index.html">Home</a>
                <a href="#help">Help</a>
                <a href="https://github.com/yourusername/besorah-yeshua-bible-planner" target="_blank">GitHub</a>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="/js/storage.js"></script>
    <script src="/js/calendar.js"></script>
    <script src="/js/reading-plans.js"></script>
    <script>
        // Initialize planner
        document.addEventListener('DOMContentLoaded', function() {
            initializePlanner();
            
            // Add event listeners
            document.getElementById('startPlanBtn')?.addEventListener('click', function() {
                const plan = document.getElementById('readingPlan').value;
                if (confirm(`Start "${document.getElementById('readingPlan').options[document.getElementById('readingPlan').selectedIndex].text}" plan today?`)) {
                    StorageManager.setStartDate(plan, new Date());
                    window.location.reload();
                }
            });
            
            document.getElementById('markComplete')?.addEventListener('change', function() {
                const isChecked = this.checked;
                const date = CalendarManager?.selectedDate || new Date();
                
                if (isChecked) {
                    StorageManager.markComplete(date);
                } else {
                    StorageManager.unmarkComplete(date);
                }
                
                CalendarManager?.render();
                updateStatistics();
            });
            
            document.getElementById('jumpToday')?.addEventListener('click', function() {
                CalendarManager?.selectDate(new Date());
            });
            
            document.getElementById('viewPlan')?.addEventListener('click', function() {
                const plan = document.getElementById('readingPlan').value;
                const planInfo = ReadingPlans.getPlanInfo(plan);
                alert(`You are on the "${planInfo.name}" plan.\n\n${planInfo.description}\n\nTotal: ${planInfo.days} days\nAverage: ~${planInfo.avgChaptersPerDay} chapters/day`);
            });
            
            document.getElementById('helpBtn')?.addEventListener('click', function() {
                alert(`Help & Tips:\n\n1. Select a reading plan from the dropdown\n2. Click "Start Plan Today" to begin from today\n3. Click on calendar dates to view readings\n4. Mark readings as complete when finished\n5. Add study notes for each day\n6. Your progress saves automatically\n\nNeed more help? Visit the GitHub repository.`);
            });
        });
    </script>
</body>
</html>